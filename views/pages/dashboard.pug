extends ../includes/layout-main
block content
  main.ml-sm-auto.px-md-4(role='main')
    div.my-3
      h3.h3 Dashboard

    .row
      .col-md-3(onclick="location.href='/customers';")
        .card-counter.primary
          i.fa.fa-users
          span.count-numbers 9999
          span.count-name Customers
      .col-md-3(onclick="location.href='/suppliers';")
        .card-counter.purple
          i.fa.fa-user
          span.count-numbers 99
          span.count-name Suppliers
      .col-md-3(onclick="location.href='/products';")
        .card-counter.success
          i.fa.fa-cube
          span.count-numbers 7500
          span.count-name Products
      .col-md-3(onclick="location.href='/orders';")
        .card-counter.info
          i.fa.fa-clipboard
          span.count-numbers 100
          span.count-name Orders

    .card.col-md-12.my-3
        .panel.panel-default.mx-3.p-3
          .panel-heading
            h3.panel-title Daily New Users
          .panel-content
            div.row.my-3
              div.col-sm-3.mb-3
                label.control-label(for='start_date') Start Date
                .input-group
                  input.form-control.change-date.fromdate#start_date(type='text', name='start_date', editable="false" required)
                  .input-group-prepend
                    span.input-group-text
                      i.fa.fa-calendar

              div.col-sm-3.mb-3
                label.control-label(for='end_date') End Date
                .input-group
                  input.form-control.change-date.todate#end_date(type='text', name='end_date', maxlength="55" editable="false" required)
                  .input-group-prepend
                    span.input-group-text
                      i.fa.fa-calendar

              .col-lg-12.my-5
                .panel.panel-default
                  .panel-heading
                    h3.panel-title Line Chart: New Users
                  .panel-content.text-center
                    canvas#teamChart.chart(height='380')
                  //- .panel-footer A simple Line Chart with Users
        
              .col-lg-12.my-5
                .panel.panel-default
                  .panel-heading
                    h3.panel-title Doughut Chart: New Users
                  .panel-content.text-center
                    canvas#doughutChart.chart(height='380')
                  //- .panel-footer A sample Doughut Chart with Users

  script(src='../layout-js/lib/chart-js/chart.bundle.min.js')
  script(src='../layout-js/users-chart.js')
  script.
    $(document).ready(function() {
      $('.count-numbers').each(function () {
        var $this = $(this);
        jQuery({ Counter: 0 }).animate({ Counter: $this.text() }, {
          duration: 1200,
          easing: 'swing',
          step: function () {
            $this.text(Math.ceil(this.Counter));
          }
        });
      });
      // set last 1 month duration
      $("#start_date").val(moment().add(-1, 'month').format('DD/MM/YYYY'));
      $("#end_date").val(moment().add().format('DD/MM/YYYY'));

      // init invoke function
      getChartData(token, $("#start_date").val(), $("#end_date").val());

      // onchange event callback
      $(".change-date").on('change', function() {
        getChartData(token, $("#start_date").val(), $("#end_date").val());
      });
    });